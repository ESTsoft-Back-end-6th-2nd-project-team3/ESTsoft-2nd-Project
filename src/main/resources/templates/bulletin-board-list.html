<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Bulletin Board List</title>
    <link href="/static/css/reset.css" rel="stylesheet">
    <link href="/static/css/bulletin-board-list.css" rel="stylesheet">
    <!--    <link href="/static/css/base.css" rel="stylesheet">-->
</head>
<body>
<div class="board-container" id="bulletin-board-list">
    <!-- 일반 사용자 게시글 목록 테이블 -->
    <table class="board-table">
        <thead>
        <tr>
            <th>번호</th>
            <th>제목</th>
            <th>댓글수</th>
            <th>작성자</th>
            <th>조회수</th>
            <th>날짜</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="post, iterStat : ${postList}">
            <td th:text="${iterStat.index + 1}">1</td>
            <td th:text="${post.title}">제목</td>
            <td th:text="${post.commentCount}">댓글수</td>
            <td th:text="${post.nickname}">닉네임</td>
            <td th:text="${post.viewCount}">조회수</td>
            <td th:text="${#dates.format(post.createdAt, 'yyyy-MM-dd')}">날짜</td>
        </tr>
        </tbody>
    </table>

    <div class="board-footer">
        <select class="sort-select" onchange="sortPosts(this.value)">
            <option value="latest">최신순</option>
            <option value="views">조회순</option>
            <option value="likes">추천순</option>
        </select>
        <div class="pagination-container">
            <button class="prev-btn" onclick="changePage('prev')" th:if="${currentPage > 1}">< 처음</button>
            <div class="pagination">
                <a th:classappend="${pageNum == currentPage ? 'active' : ''}"
                   th:each="pageNum : ${#numbers.sequence(1, totalPages)}"
                   th:href="@{'?page=' + ${pageNum}}"
                   th:text="${pageNum}">1</a>
            </div>
            <button class="next-btn" onclick="changePage('next')" th:if="${currentPage < totalPages}">다음 ></button>
        </div>

        <button class="write-btn" onclick="goToWritePage()">글쓰기</button>
    </div>

    <div class="search-box">
        <select id="searchType">
            <option value="title">제목 검색</option>
            <option value="author">작성자 검색</option>
        </select>
        <input id="searchQuery" placeholder=" 검색어를 입력하세요" type="text">
        <button onclick="searchUserPosts()">검색</button>
    </div>

    <!-- 관리자용 필터 및 검색 옵션 -->
    <div class="admin-controls" th:if="${isAdmin}">
        <select name="searchType">
            <option value="title">제목 검색</option>
            <option value="user">작성자 검색</option>
        </select>

        <select name="post_type">
            <option disabled selected>카테고리</option>
            <option value="music">음악</option>
            <option value="travel">여행</option>
            <option value="photo">사진</option>
            <option value="game">게임</option>
        </select>

        <select id="target_id_select" name="target_id">
            <option value="1">지역</option>
            <option value="2">취미</option>
        </select>

        <select name="isActive">
            <option value="1">활성화</option>
            <option value="0">비활성화</option>
        </select>

        <input id="search-input" name="searchQuery" placeholder="검색어를 입력하세요" type="text">
        <button onclick="searchAdminPosts()">검색</button>
    </div>
</div>

<script src="/static/js/bulletin-board.js"></script>
</body>
</html>
